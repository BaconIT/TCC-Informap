<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8" />
    <title>Enable sign-in</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
    <script type="text/javascript">
    // This example enables Sign In by loading the Maps API with the signed_in
    // parameter set to true. For example:
    // https://maps.googleapis.com/maps/api/js?signed_in=true&callback=initMap		
    	// onSuccess Callback
    // This method accepts a Position object, which contains the
    // current GPS coordinates
    	function initMap(tituloponto, position) {
    		if(position){
    			var tituloponto = tituloponto;
    			var latitude = position.coords.latitude;
    			var longitude = position.coords.longitude;
    			var myLatLng = {lat: latitude, lng: longitude};

    			var map = new google.maps.Map(document.getElementById('map'), {
    				zoom: 18,
    				center: myLatLng
            
    			});

    			var marker = new google.maps.Marker({
    				position: myLatLng,
    				map: map,
    				title: tituloponto,

    			});
    		}
        else{
          alert('Habilite a localização do seu aparelho');
        }
    	}
    </script>
    <script type="text/javascript">
    var onSuccess = function(position) {
    	var tituloponto = "Você está aqui!";
    	initMap(tituloponto, position);
        /*alert('Latitude: '          + position.coords.latitude          + '\n' +
              'Longitude: '         + position.coords.longitude         + '\n' +
              'Altitude: '          + position.coords.altitude          + '\n' +
              'Accuracy: '          + position.coords.accuracy          + '\n' +
              'Altitude Accuracy: ' + position.coords.altitudeAccuracy  + '\n' +
              'Heading: '           + position.coords.heading           + '\n' +
              'Speed: '             + position.coords.speed             + '\n' +
              'Timestamp: '         + position.timestamp                + '\n');*/
    };

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }
    navigator.geolocation.getCurrentPosition(onSuccess, onError);
    </script>
</head>
  <body>
    <div id="map"></div>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4mQ6qxJxvh3zuSfEILZtWs2mD0iB4tQM&signed_in=true&callback=initMap"></script>
  </body>
</html>